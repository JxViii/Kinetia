<!DOCTYPE html>

<html lang="es">
    <head>
    <title>{{ title }}</title>
    <link rel="icon" href="images/kinetia.png" type="image/jpg">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="index, follow">
    <meta name="description" content="Explora el futuro de la creaci√≥n de contenido con IA y automatizaci√≥n. Servicios personalizados para empresas modernas.">
    <meta name="keywords" content="automatizaci√≥n, inteligencia artificial, IA, creaci√≥n de contenido, contenido con IA, productividad empresarial, eficiencia digital, automatizaci√≥n procesos, Kinetia">

    <!-- Open Graph -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="Kinetia | Automatizaci√≥n con IA para empresas modernas">
    <meta property="og:description" content="Explora el futuro de la creaci√≥n de contenido con IA y automatizaci√≥n. Servicios personalizados para empresas modernas.">
    <meta property="og:url" content="https://kinetia.tech">
    <meta property="og:image" content="https://kinetia.tech/images/banner.png">

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Kinetia | Automatizaci√≥n con IA para empresas modernas">
    <meta name="twitter:description" content="Transforma tu negocio con automatizaci√≥n, IA y contenido inteligente.">
    <meta name="twitter:image" content="https://kinetia.tech/images/twitter.png">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="/css/main.css">
    <script src="/scripts/general/functions.js"></script>
  </head>
  <body>
    {% include 'header.njk' %}

    {% block content %}

        {{ content | safe }}

    {% endblock %}
    
    {% include 'button.njk' %}
    {% include 'footer.njk' %}

    <script src="/scripts/general/setup.js"></script>

    <script>
      function loadScript(a){
        var b = document.getElementsByTagName("head")[0],
            c = document.createElement("script");
        c.type = "text/javascript";
        c.src = "https://tracker.metricool.com/resources/be.js";
        c.onreadystatechange = a;
        c.onload = a;
        b.appendChild(c);
      }
      loadScript(function(){
        beTracker.t({hash:"108ffc91db984e982d0f1abfd84c3856"});
      });
    </script>

  </body>
  </html>

  <style>
  #chat-widget {
    position: fixed;
    bottom: 20px;
    right: 20px;
    width: 300px;
    background: white;
    border-radius: 12px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    font-family: sans-serif;
    z-index: 9999;
    overflow: hidden;
  }

  #chat-header {
    background-color: #0072ff;
    color: white;
    padding: 10px;
    font-weight: bold;
  }

  #chat-body {
    max-height: 200px;
    overflow-y: auto;
    padding: 10px;
    font-size: 14px;
  }

  #chat-input {
    display: flex;
    border-top: 1px solid #ddd;
  }

  #chat-input input {
    flex: 1;
    border: none;
    padding: 10px;
    font-size: 14px;
  }

  #chat-input button {
    background-color: #0072ff;
    color: white;
    border: none;
    padding: 0 16px;
    cursor: pointer;
  }

  #chat-toggle {
    position: fixed;
    bottom: 20px;
    right: 20px;
    background-color: #0072ff;
    color: white;
    border: none;
    border-radius: 50%;
    width: 56px;
    height: 56px;
    font-size: 26px;
    z-index: 9998;
    cursor: pointer;
  }
</style>

<button id="chat-toggle">üí¨</button>

<div id="chat-widget" style="display: none;">
  <div id="chat-header">Asistente IA</div>
  <div id="chat-body">
    <div><strong>Kinetia:</strong> ¬°Hola! ¬øEn qu√© puedo ayudarte hoy?</div>
  </div>
  <div id="chat-input">
    <input type="text" id="chat-message" placeholder="Escribe tu mensaje..." />
    <button onclick="sendMessage()">‚û§</button>
  </div>
</div>

<script>
  const webhookUrl = "https://TUDOMINIO.OOO/webhook"; // ‚¨ÖÔ∏è Cambia esto por el webhook real

  document.getElementById("chat-toggle").addEventListener("click", () => {
    const widget = document.getElementById("chat-widget");
    widget.style.display = widget.style.display === "none" ? "block" : "none";
  });

  async function sendMessage() {
    const input = document.getElementById("chat-message");
    const message = input.value.trim();
    if (!message) return;

    const chatBody = document.getElementById("chat-body");
    chatBody.innerHTML += `<div><strong>T√∫:</strong> ${message}</div>`;
    input.value = "";

    try {
      const res = await fetch(webhookUrl, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ question: message })
      });

      const data = await res.json();
      const respuesta = data.reply || "ü§ñ Lo siento, no he podido procesar tu mensaje.";
      chatBody.innerHTML += `<div><strong>Kinetia:</strong> ${respuesta}</div>`;
      chatBody.scrollTop = chatBody.scrollHeight;
    } catch (err) {
      chatBody.innerHTML += `<div><strong>Kinetia:</strong> ‚ùå Error al contactar con el servidor.</div>`;
    }
  }
</script>
