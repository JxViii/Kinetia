<!DOCTYPE html>

<html lang="es">
    <head>
    <title>{{ title }}</title>
    <link rel="icon" href="images/kinetia.png" type="image/jpg">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="index, follow">
    <meta name="description" content="Explora el futuro de la creaci√≥n de contenido con IA y automatizaci√≥n. Servicios personalizados para empresas modernas.">
    <meta name="keywords" content="automatizaci√≥n, inteligencia artificial, IA, creaci√≥n de contenido, contenido con IA, productividad empresarial, eficiencia digital, automatizaci√≥n procesos, Kinetia">

    <!-- Open Graph -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="Kinetia | Automatizaci√≥n con IA para empresas modernas">
    <meta property="og:description" content="Explora el futuro de la creaci√≥n de contenido con IA y automatizaci√≥n. Servicios personalizados para empresas modernas.">
    <meta property="og:url" content="https://kinetia.tech">
    <meta property="og:image" content="https://kinetia.tech/images/banner.png">

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Kinetia | Automatizaci√≥n con IA para empresas modernas">
    <meta name="twitter:description" content="Transforma tu negocio con automatizaci√≥n, IA y contenido inteligente.">
    <meta name="twitter:image" content="https://kinetia.tech/images/twitter.png">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="/css/main.css">
    <script src="/scripts/general/functions.js"></script>
  </head>
  <body>
    {% include 'header.njk' %}

    {% block content %}

        {{ content | safe }}

    {% endblock %}
    
    {% include 'button.njk' %}
    {% include 'footer.njk' %}

    <script src="/scripts/general/setup.js"></script>

    <script>
      function loadScript(a){
        var b = document.getElementsByTagName("head")[0],
            c = document.createElement("script");
        c.type = "text/javascript";
        c.src = "https://tracker.metricool.com/resources/be.js";
        c.onreadystatechange = a;
        c.onload = a;
        b.appendChild(c);
      }
      loadScript(function(){
        beTracker.t({hash:"108ffc91db984e982d0f1abfd84c3856"});
      });
    </script>

  </body>
  </html>

<style>
  /* Bot√≥n flotante del chat */
  #chat-toggle {
    position: fixed;
    bottom: 24px;
    right: 24px;
    width: 56px;
    height: 56px;
    background-color: #ffffff;
    border: 2px solid #e0e0e0;
    border-radius: 50%;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    font-size: 24px;
    color: #333;
    cursor: pointer;
    z-index: 9998;
    transition: transform 0.2s ease;
  }

  #chat-toggle:hover {
    transform: scale(1.05);
  }

  /* Ventana del chat */
  #chat-widget {
    position: fixed;
    bottom: 90px;
    right: 24px;
    width: 340px;
    max-height: 500px;
    background-color: #f9f9f9;
    border-radius: 16px;
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
    display: none;
    flex-direction: column;
    font-family: 'Segoe UI', sans-serif;
    z-index: 9999;
    overflow: hidden;
  }

  #chat-header {
    background: linear-gradient(90deg, #000000, #2b2b2b);
    color: #f1c40f;
    padding: 12px 16px;
    font-weight: 600;
    font-size: 16px;
  }

  #chat-body {
    padding: 12px 16px;
    flex: 1;
    overflow-y: auto;
    font-size: 14px;
    color: #333;
  }

  #chat-input {
    display: flex;
    border-top: 1px solid #ddd;
    background-color: #fff;
  }

  #chat-input input {
    flex: 1;
    padding: 10px 12px;
    border: none;
    font-size: 14px;
    outline: none;
  }

  #chat-input button {
    background-color: #f1c40f;
    border: none;
    padding: 0 16px;
    cursor: pointer;
    font-weight: bold;
    color: #000;
    font-size: 16px;
  }
</style>

<!-- Bot√≥n flotante -->
<button id="chat-toggle">üí¨</button>

<!-- Ventana de chat -->
<div id="chat-widget">
  <div id="chat-header">Asistente IA</div>
  <div id="chat-body">
    <div><strong>Kinetia:</strong> ¬°Hola! ¬øEn qu√© puedo ayudarte hoy?</div>
  </div>
  <div id="chat-input">
    <input type="text" id="chat-message" placeholder="Escribe un mensaje..." />
    <button onclick="sendMessage()">‚û§</button>
  </div>
</div>

<!-- L√≥gica del asistente -->
<script>
  const webhookUrl = "https://TUDOMINIO/webhook"; // ‚ö†Ô∏è Reemplaza con tu URL de webhook n8n real

  const toggleBtn = document.getElementById("chat-toggle");
  const widget = document.getElementById("chat-widget");
  const body = document.getElementById("chat-body");
  const input = document.getElementById("chat-message");

  toggleBtn.addEventListener("click", () => {
    widget.style.display = widget.style.display === "none" ? "flex" : "none";
  });

  async function sendMessage() {
    const message = input.value.trim();
    if (!message) return;

    body.innerHTML += `<div><strong>T√∫:</strong> ${message}</div>`;
    input.value = "";
    body.scrollTop = body.scrollHeight;

    try {
      const res = await fetch(webhookUrl, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ question: message })
      });

      const data = await res.json();
      const respuesta = data.reply || "ü§ñ Lo siento, no entend√≠ tu mensaje.";
      body.innerHTML += `<div><strong>Kinetia:</strong> ${respuesta}</div>`;
      body.scrollTop = body.scrollHeight;
    } catch {
      body.innerHTML += `<div><strong>Kinetia:</strong> ‚ùå No se pudo contactar con el servidor.</div>`;
    }
  }
</script>

