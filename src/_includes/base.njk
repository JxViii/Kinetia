<!DOCTYPE html>

<html lang="es">
    <head>
    <title>{{ title }}</title>
    <link rel="icon" href="images/kinetia.png" type="image/jpg">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="index, follow">
    <meta name="description" content="Explora el futuro de la creaci√≥n de contenido con IA y automatizaci√≥n. Servicios personalizados para empresas modernas.">
    <meta name="keywords" content="automatizaci√≥n, inteligencia artificial, IA, creaci√≥n de contenido, contenido con IA, productividad empresarial, eficiencia digital, automatizaci√≥n procesos, Kinetia">

    <!-- Open Graph -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="Kinetia | Automatizaci√≥n con IA para empresas modernas">
    <meta property="og:description" content="Explora el futuro de la creaci√≥n de contenido con IA y automatizaci√≥n. Servicios personalizados para empresas modernas.">
    <meta property="og:url" content="https://kinetia.tech">
    <meta property="og:image" content="https://kinetia.tech/images/banner.png">

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Kinetia | Automatizaci√≥n con IA para empresas modernas">
    <meta name="twitter:description" content="Transforma tu negocio con automatizaci√≥n, IA y contenido inteligente.">
    <meta name="twitter:image" content="https://kinetia.tech/images/twitter.png">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="/css/main.css">
    <script src="/scripts/general/functions.js"></script>
  </head>
  <body>
    {% include 'header.njk' %}

    {% block content %}

        {{ content | safe }}

    {% endblock %}
    
    {% include 'button.njk' %}
    {% include 'footer.njk' %}

    <script src="/scripts/general/setup.js"></script>

    <script>
      function loadScript(a){
        var b = document.getElementsByTagName("head")[0],
            c = document.createElement("script");
        c.type = "text/javascript";
        c.src = "https://tracker.metricool.com/resources/be.js";
        c.onreadystatechange = a;
        c.onload = a;
        b.appendChild(c);
      }
      loadScript(function(){
        beTracker.t({hash:"108ffc91db984e982d0f1abfd84c3856"});
      });
    </script>

  </body>
  </html>

<!-- Estilos del nuevo widget -->
<style>
  :root {
    --kinetia-yellow: #f1c40f;
    --kinetia-dark: #111;
    --kinetia-bg: #fff;
    --kinetia-shadow: rgba(0, 0, 0, 0.1);
  }

  #kinetia-chat-button {
    position: fixed;
    bottom: 24px;
    right: 24px;
    width: 64px;
    height: 64px;
    background-color: var(--kinetia-bg);
    border-radius: 50%;
    box-shadow: 0 4px 12px var(--kinetia-shadow);
    border: 1px solid #ddd;
    cursor: pointer;
    z-index: 9998;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: transform 0.2s ease;
  }

  #kinetia-chat-button:hover {
    transform: scale(1.05);
  }

  #kinetia-chat-button svg {
    width: 28px;
    height: 28px;
    fill: var(--kinetia-dark);
  }

  #kinetia-chat-widget {
    position: fixed;
    bottom: 100px;
    right: 24px;
    width: 380px;
    max-height: 580px;
    background-color: var(--kinetia-bg);
    border-radius: 20px;
    box-shadow: 0 8px 24px var(--kinetia-shadow);
    display: none;
    flex-direction: column;
    font-family: 'Segoe UI', sans-serif;
    z-index: 9999;
    overflow: hidden;
    border: 1px solid #ddd;
  }

  #kinetia-chat-header {
    background: var(--kinetia-dark);
    color: var(--kinetia-yellow);
    padding: 16px;
    font-size: 17px;
    font-weight: 600;
  }

  #kinetia-chat-body {
    padding: 16px;
    flex: 1;
    overflow-y: auto;
    font-size: 15px;
    color: #333;
    background: #fdfdfd;
  }

  #kinetia-chat-body div {
    margin-bottom: 10px;
  }

  #kinetia-chat-input {
    display: flex;
    padding: 10px;
    border-top: 1px solid #eee;
    background: var(--kinetia-bg);
  }

  #kinetia-chat-input input {
    flex: 1;
    padding: 10px 12px;
    font-size: 15px;
    border: 1px solid #ccc;
    border-radius: 8px;
    outline: none;
  }

  #kinetia-chat-input button {
    margin-left: 8px;
    padding: 0 18px;
    background-color: var(--kinetia-yellow);
    color: #000;
    font-weight: bold;
    border: none;
    border-radius: 8px;
    cursor: pointer;
  }
</style>

<!-- Bot√≥n flotante -->
<div id="kinetia-chat-button">
  <svg viewBox="0 0 24 24">
    <path d="M12 3C6.48 3 2 6.94 2 11.5c0 2.11 1.05 4.02 2.75 5.5L4 21l4.12-1.67C9.38 19.77 10.67 20 12 20c5.52 0 10-3.94 10-8.5S17.52 3 12 3z"/>
  </svg>
</div>

<!-- Ventana del chat -->
<div id="kinetia-chat-widget">
  <div id="kinetia-chat-header">Asistente IA</div>
  <div id="kinetia-chat-body">
    <div><strong>Kinetia:</strong> ¬°Hola! ¬øEn qu√© puedo ayudarte hoy?</div>
  </div>
  <div id="kinetia-chat-input">
    <input type="text" id="kinetia-chat-message" placeholder="Escribe tu mensaje..." />
    <button onclick="sendKinetiaMessage()">Enviar</button>
  </div>
</div>

<!-- Script de funcionalidad -->
<script>
  const chatWidget = document.getElementById("kinetia-chat-widget");
  const chatButton = document.getElementById("kinetia-chat-button");
  const chatBody = document.getElementById("kinetia-chat-body");
  const input = document.getElementById("kinetia-chat-message");
  const webhookUrl = "https://TUDOMINIO/webhook"; // ‚ö†Ô∏è Reemplaza esto con tu webhook real

  chatButton.addEventListener("click", () => {
    chatWidget.style.display = chatWidget.style.display === "none" ? "flex" : "none";
  });

  async function sendKinetiaMessage() {
    const message = input.value.trim();
    if (!message) return;

    chatBody.innerHTML += `<div><strong>T√∫:</strong> ${message}</div>`;
    input.value = "";
    chatBody.scrollTop = chatBody.scrollHeight;

    try {
      const res = await fetch(webhookUrl, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ question: message })
      });

      const data = await res.json();
      const respuesta = data.reply || "ü§ñ Lo siento, no pude entenderte.";
      chatBody.innerHTML += `<div><strong>Kinetia:</strong> ${respuesta}</div>`;
      chatBody.scrollTop = chatBody.scrollHeight;
    } catch (err) {
      chatBody.innerHTML += `<div><strong>Kinetia:</strong> ‚ùå Error al conectar con el servidor.</div>`;
    }
  }
</script>
