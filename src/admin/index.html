<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Kinetia CMS</title>
  <style>
    body {
      font-family: sans-serif;
      background: #111;
      color: white;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
      margin: 0;
    }
    #login-screen {
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    #login-screen input {
      padding: 10px;
      margin-top: 10px;
    }
    #cms-container {
      display: none;
    }
  </style>
  <script>
    window.CMS_MANUAL_INIT = true;
  </script>
</head>
<body>

  <!-- Login screen -->
  <div id="login-screen">
    <h2>ðŸ”’ Acceso restringido</h2>
    <p>Introduce tu clave para acceder al CMS</p>
    <input type="password" id="password" placeholder="Clave..." />
    <button onclick="validateAccess()">Entrar</button>
    <p id="error" style="color: red; display: none;">Clave incorrecta</p>
  </div>

  <!-- CMS container (hidden by default) -->
  <div id="cms-container"></div>

  <!-- CMS script -->
  <script src="https://unpkg.com/decap-cms@^2.0.0/dist/decap-cms.js"></script>
  <script>
    const CORRECT_PASSWORD = "admin123"; // Cambia esta clave secreta

    function validateAccess() {
      const input = document.getElementById("password").value;
      if (input === CORRECT_PASSWORD) {
        document.getElementById("login-screen").style.display = "none";
        document.getElementById("cms-container").style.display = "block";

        CMS.init({
          config: {
            backend: {
              name: "github",
              repo: "JxViii/Kinetia",
              branch: "main",
              auth_type: "token",
              token: "X5<gYAL6/F]F39l{z5ql"
            },
            media_folder: "public/images/uploads",
            public_folder: "/images/uploads",
            collections: [
              {
                name: "blog",
                label: "Blog",
                folder: "src/blog",
                create: true,
                slug: "{{slug}}",
                fields: [
                  { label: "Title", name: "title", widget: "string" },
                  { label: "Date", name: "date", widget: "datetime" },
                  { label: "Body", name: "body", widget: "markdown" }
                ]
              }
            ]
          }
        });
      } else {
        document.getElementById("error").style.display = "block";
      }
    }
  </script>

</body>
</html>
