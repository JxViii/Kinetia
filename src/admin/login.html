<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Kinetia CMS Login</title>
  <style>
    body { font-family: sans-serif; max-width: 400px; margin: 5rem auto; text-align: center; }
    input { width: 90%; margin: 0.5rem 0; padding: 0.6rem; }
    button { padding: 0.6rem 1.2rem; margin-top: 1rem; }
  </style>
</head>
<body>
  <h2>Login to Kinetia CMS</h2>
  <input type="email" id="email" placeholder="Email" /><br />
  <input type="password" id="password" placeholder="Password" /><br />
  <button onclick="login()">Login</button>

  <script>
    const AUTH0_DOMAIN = "dev-7xyqz4s3zucsqv2q.eu.auth0.com";
    const CLIENT_ID = "Vt1X9Nk1LppVTbfR50DIABK3jWLAUIQg";

    async function login() {
      const email = document.getElementById("email").value;
      const password = document.getElementById("password").value;

      try {
        const res = await fetch(`https://${AUTH0_DOMAIN}/oauth/token`, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({
            grant_type: "password",
            username: email,
            password: password,
            client_id: CLIENT_ID,
            scope: "openid profile email"
          }),
        });

        if (!res.ok) throw new Error("Login failed");

        const data = await res.json();
        localStorage.setItem("access_token", data.access_token);
        window.location.href = "/admin/#/";
      } catch (err) {
        alert("Invalid credentials");
      }
    }
  </script>
</body>
</html>
